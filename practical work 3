from datetime import datetime, timedelta
import os
import time

# Задание 1: Работа с датой и временем
def datetime_info(date_str):
    date_obj = datetime.strptime(date_str, '%Y-%m-%d')
    
    # Форматирование даты
    formatted_date = date_obj.strftime('%d-%m-%Y')
    
    # Получение дня недели
    day_of_week = date_obj.strftime('%A')
    
    # Количество дней до следующего года
    next_year = datetime(date_obj.year + 1, 1, 1)
    days_until_next_year = (next_year - date_obj).days
    
    return {
        'Дата': formatted_date,
        'День недели': day_of_week,
        'Дней до следующего года': days_until_next_year
    }

# Задание 2: Чтение и запись в файл
def write_and_read_file(filename, content):
    # Запись в файл
    with open(filename, 'w') as file:
        file.write(content)
    
    # Чтение из файла
    with open(filename, 'r') as file:
        return file.read()

# Задание 3: Работа с каталогами
def list_files_in_directory(directory_path):
    # Получение списка файлов в каталоге
    return [f for f in os.listdir(directory_path) if os.path.isfile(os.path.join(directory_path, f))]

# Задание 4: Проверка и создание каталогов
def ensure_directory_exists(directory_path):
    # Проверка существования каталога
    if not os.path.exists(directory_path):
        os.makedirs(directory_path)

# Задание 5: Работа с мета-данными файлов
def file_stats(filepath):
    # Получение информации о файле
    file_info = os.stat(filepath)
    
    return {
        'Размер (в байтах)': file_info.st_size,
        'Время последнего изменения': time.ctime(file_info.st_mtime),
        'Название': os.path.basename(filepath),
        'Расширение': os.path.splitext(filepath)[1]
    }

# Пример использования функций
if __name__ == "__main__":
    # Задание 1
    date_info = datetime_info('2024-10-16')
    print("Информация о дате:", date_info)
    
    # Задание 2
    output = write_and_read_file('example.txt', 'Hello')
    print("Содержимое файла:", output)
    
    # Задание 3
    files = list_files_in_directory('.')
    print("Файлы в текущем каталоге:", files)
    
    # Задание 4
    ensure_directory_exists('new_directory')
    print("Каталог 'new_directory' был создан или уже существует.")
    
    # Задание 5
    stats = file_stats('example.txt')
    print("Метаданные файла:", stats)
